# מערכת ניתוח מסמכים פיננסיים

מערכת אינטליגנטית לניתוח, חילוץ וארגון מידע ממסמכים פיננסיים בעברית ובאנגלית.

## תכונות עיקריות

- **סריקת קבצי PDF**: יכולת לסרוק מסמכים פיננסיים בפורמט PDF, כולל דוחות כספיים, מסמכי בנק ומסמכי השקעות
- **חילוץ טקסט ונתונים**: מיצוי טקסט ונתונים מספריים מהמסמכים הנסרקים באמצעות OCR ובינה מלאכותית
- **יצירת טבלאות**: ארגון הנתונים בטבלאות ומבנים מידע להשוואה וניתוח
- **צ'אטבוט**: שאלת שאלות באופן אינטראקטיבי אודות המסמכים הסרוקים והנתונים שחולצו

## ארכיטקטורה

פרויקט זה מיישם ארכיטקטורת "Vertical Slice", המארגנת את הקוד סביב תכונות (Features) במקום שכבות טכנולוגיות (Layers).

### מבנה התיקיות

```
/workspaces/back/
├── agent_framework/          # מסגרת הסוכנים החכמים
│   ├── coordinator.py       # מתאם בין הסוכנים השונים
│   ├── memory_agent.py      # סוכן לניהול זיכרון ושמירת מידע
│   └── __init__.py
│
├── routes/                  # ניתוב בקשות HTTP
│   ├── document_routes.py   # ניתוב לטיפול במסמכים
│   ├── langchain_routes.py  # ניתוב לפעולות AI
│   └── __init__.py
│
├── models/                  # מודלים של בסיס הנתונים
│   ├── document_models.py   # מודל למסמכים
│   └── __init__.py
│
├── services/               # שירותי עסקים
│   └── document_service.py # לוגיקה עסקית לטיפול במסמכים
│
├── utils/                  # כלי עזר
│   └── pdf_processor.py    # מעבד קבצי PDF
│
├── uploads/               # תיקיית העלאת קבצים
├── frontend/build/        # קבצי הבuild של הפרונטאנד
├── app.py                # אפליקציית Flask הראשית
└── .env                  # משתני סביבה
```

## הגדרת סביבת פיתוח

### דרישות מקדימות

- Python 3.8 ומעלה
- MongoDB
- Tesseract OCR (עם תמיכה בעברית)
- מפתח API של Hugging Face (אופציונלי למודלי שפה מתקדמים)

### התקנה

1. **קלון המאגר והתקנת סביבה וירטואלית:**

```bash
git clone https://github.com/aviadkim/back.git
cd back
python -m venv venv
source venv/bin/activate  # לינוקס/מאק
# או
venv\Scripts\activate     # חלונות
```

2. **הרצת סקריפט ההתקנה האוטומטי:**

```bash
python setup.py
```

סקריפט זה:
- יוצר את כל התיקיות הנדרשות
- מתקין את כל התלויות מ-requirements.txt
- בודק את התקנת Tesseract
- בודק את זמינות MongoDB
- יוצר קובץ .env אם לא קיים

3. **התאמת קובץ .env:**

עדכן את קובץ ה-.env עם המפתחות והגדרות האישיות שלך.

### הפעלת השרת

```bash
python app.py
```

השרת יפעל בכתובת: http://localhost:5000

## שימוש במערכת

### העלאת מסמכים

ניתן להעלות מסמכים דרך ה-API:

```bash
curl -X POST -F "file=@/path/to/your/document.pdf" -F "language=he" http://localhost:5000/api/upload
```

או דרך ממשק המשתמש בדפדפן.

### שאילת שאלות

לאחר העלאת מסמכים, ניתן לשלוח שאילתות ל-API:

```bash
curl -X POST -H "Content-Type: application/json" -d '{
  "question": "מה הרווח הנקי ברבעון האחרון?",
  "document_ids": ["document_id_here"],
  "language": "he"
}' http://localhost:5000/api/chat
```

### ייצוא טבלאות

ניתן לייצא טבלאות מחולצות לאקסל:

```
GET /api/export/<document_id>/table/<table_index>
```

## טיפים לפיתוח

- בדוק את ה-API באמצעות הדף http://localhost:5000/test
- עיין בתיעוד נוסף בתיקיית `docs/`
- השתמש ב-Tesseract עם מודל השפה העברית `heb+eng` לתוצאות מיטביות

## פריסה

ראה את המדריך המלא בקובץ `מדריך התקנה והתקדמות למערכת ניתוח מסמכים פיננסיים.md`
